---
description: 컨텍스트 윈도우 모니터. 85% 임계값 도달 시 사전 대응.
globs:
  - ".timsquad/.daemon/**"
---

# 컨텍스트 윈도우 모니터 (Context Window Monitor)

## 자동 감지
매 턴 종료 시 `[Session]` 메시지에 컨텍스트 사용률이 포함됩니다.
- 70% 이상: `Ctx: XX%` 표시
- 85% 이상: 경고 메시지 발생

## 85% 경고 수신 시 대응 절차
1. **현재 태스크 상태 기록**: 진행 중인 작업, 결정사항, 다음 단계를 정리
2. **서브에이전트 완료 대기**: 활성 서브에이전트가 있으면 완료 후 정리
3. **태스크 마무리**: 현재 태스크를 가능한 완료 지점까지 진행
4. **컨텍스트 압축 대비**: 자동 압축 후에도 `[Session]` 메시지로 상태 복원 가능

## 참고
- 기본 컨텍스트 윈도우: 200K 토큰 (Sonnet 기준)
- 자동 압축은 75-95% 사이에서 발생 (Claude Code 내부 휴리스틱)
- 사용률은 최신 턴의 input 토큰 기준 (누적 아님)
